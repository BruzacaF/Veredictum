<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="form-processo">

    <h1 class="h3 fw-bold mb-4">Gerenciar Processos</h1>

    <!-- FLASH MESSAGES -->
    <div th:if="${success}" id="flash-message-success" class="alert alert-success shadow-sm">
        <span th:text="${success}"></span>
    </div>

    <div th:if="${error}" id="flash-message-error" class="alert alert-danger shadow-sm">
        <span th:text="${error}"></span>
    </div>

    <!-- CARD DE CADASTRO -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">

            <h5 class="fw-semibold mb-3">Cadastrar Novo Processo</h5>

            <form th:action="@{/processo/adicionar}" method="post" th:object="${processoDTO}" enctype="multipart/form-data">

                <!-- Assunto -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">Assunto</label>

                    <div class="text-danger small"
                         th:if="${#fields.hasErrors('assunto')}"
                         th:errors="*{assunto}"></div>

                    <select class="form-select mt-1" th:field="*{assunto}" required>
                        <option value="" disabled>Selecione um assunto</option>

                        <option th:each="assunto : ${assuntos}"
                                th:value="${assunto.id}"
                                th:text="${assunto.nome}">
                        </option>

                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Texto do Requerimento</label>

                    <div class="text-danger small"
                         th:if="${#fields.hasErrors('textoRequerimento')}"
                         th:errors="*{textoRequerimento}"></div>

                    <textarea class="form-control mt-1"
                              th:field="*{textoRequerimento}"
                              rows="4"></textarea>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Anexo (opcional)</label>

                    <div class="text-danger small"
                         th:if="${#fields.hasErrors('arquivo')}"
                         th:errors="*{arquivo}"></div>

                    <input type="file"
                           class="form-control"
                           th:field="*{arquivo}">
                </div>


                <!-- BotÃ£o -->
                <button type="submit" class="btn btn-primary px-4">
                    Enviar Processo
                </button>

            </form>
        </div>
    </div>

</div>
</body>
</html>
